<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Car Racing Game</title>
<style>
    body {
        margin: 0;
        padding: 0;
        background: #222;
        overflow: hidden;
        font-family: Arial, sans-serif;
    }
    .gameArea {
        width: 400px;
        height: 600px;
        background: #555;
        margin: 20px auto;
        position: relative;
        border: 2px solid #fff;
        overflow: hidden;
    }
    .car {
        width: 50px;
        height: 100px;
        background: red;
        position: absolute;
        bottom: 20px;
        left: 175px;
        border-radius: 5px;
    }
    .enemy {
        width: 50px;
        height: 100px;
        background: yellow;
        position: absolute;
        border-radius: 5px;
    }
    .line {
        width: 10px;
        height: 100px;
        background: white;
        position: absolute;
        left: 195px;
    }
    .score {
        color: white;
        font-size: 20px;
        text-align: center;
        margin-top: 10px;
    }
</style>
</head>
<body>

<div class="score">Score: 0</div>
<div class="gameArea"></div>

<script>
    const score = document.querySelector('.score');
    const gameArea = document.querySelector('.gameArea');

    let player = { speed: 5, score: 0, x: 0, y: 0, start: false };

    // Create road lines
    for (let i = 0; i < 5; i++) {
        let line = document.createElement('div');
        line.classList.add('line');
        line.y = i * 150;
        line.style.top = line.y + 'px';
        gameArea.appendChild(line);
    }

    // Create player car
    let car = document.createElement('div');
    car.classList.add('car');
    gameArea.appendChild(car);

    // Create enemy cars
    function createEnemy() {
        let enemy = document.createElement('div');
        enemy.classList.add('enemy');
        enemy.y = -100;
        enemy.style.top = enemy.y + 'px';
        enemy.style.left = Math.floor(Math.random() * 350) + 'px';
        gameArea.appendChild(enemy);
    }
    createEnemy();
    createEnemy();

    let keys = { ArrowUp: false, ArrowDown: false, ArrowLeft: false, ArrowRight: false };

    document.addEventListener('keydown', e => {
        e.preventDefault();
        keys[e.key] = true;
    });
    document.addEventListener('keyup', e => {
        e.preventDefault();
        keys[e.key] = false;
    });

    function moveLines() {
        let lines = document.querySelectorAll('.line');
        lines.forEach(line => {
            line.y += player.speed;
            if (line.y > 600) {
                line.y = -100;
            }
            line.style.top = line.y + 'px';
        });
    }

    function moveEnemies(car) {
        let enemies = document.querySelectorAll('.enemy');
        enemies.forEach(enemy => {
            if (isCollide(car, enemy)) {
                endGame();
            }
            enemy.y += player.speed;
            if (enemy.y > 600) {
                enemy.y = -100;
                enemy.style.left = Math.floor(Math.random() * 350) + 'px';
                player.score++;
                score.innerText = 'Score: ' + player.score;
            }
            enemy.style.top = enemy.y + 'px';
        });
    }

    function isCollide(a, b) {
        let aRect = a.getBoundingClientRect();
        let bRect = b.getBoundingClientRect();
        return !(
            aRect.top > bRect.bottom ||
            aRect.bottom < bRect.top ||
            aRect.right < bRect.left ||
            aRect.left > bRect.right
        );
    }

    function playGame() {
        let carElement = document.querySelector('.car');
        moveLines();
        moveEnemies(carElement);

        if (keys.ArrowUp && player.y > 0) player.y -= player.speed;
        if (keys.ArrowDown && player.y < (gameArea.offsetHeight - 100)) player.y += player.speed;
        if (keys.ArrowLeft && player.x > 0) player.x -= player.speed;
        if (keys.ArrowRight && player.x < (gameArea.offsetWidth - 50)) player.x += player.speed;

        carElement.style.top = player.y + 'px';
        carElement.style.left = player.x + 'px';

        if (player.start) {
            requestAnimationFrame(playGame);
        }
    }

    function startGame() {
        player.start = true;
        player.score = 0;
        player.x = car.offsetLeft;
        player.y = car.offsetTop;
        requestAnimationFrame(playGame);
    }

    function endGame() {
        player.start = false;
        alert('Game Over! Your score: ' + player.score);
        window.location.reload();
    }

    startGame();
</script>

</body>
</html>
